<div id="container-user-list" class="container-fluid d-flex justify-content-center align-items-center">
    <div class="col-7 col-md-10 col-lg-12">
        <div class="card text-start shadow-lg">
            <div class="card-header title text-center">
                <h2 class="fs-4">{{ title }}</h2>
            </div>
            <div class="card-body">
                <!-- Botones Responsivos -->
                <div class="d-flex flex-wrap justify-content-center gap-2 mb-3">
                    <button [disabled]="users.length === 0" class="btn btn-primary" (click)="descargarPDF()">
                        <i class="fa-solid fa-print"></i> Imprimir Tabla
                    </button>
                    <button class="btn btn-success" [routerLink]="['/users', 'Insert', '']">
                        <i class="fa-solid fa-user-plus"></i> Añadir Empleado
                    </button>      
                    <button [disabled]="users.length === 0" class="btn btn-warning"
                        [routerLink]="['/users', 'Update', selectedUser]"  [disabled]="!selectedUser">
                        <i class="fa-solid fa-pen"></i> Actualizar Empleado
                    </button>
                    <button [disabled]="users.length === 0" class="btn btn-danger"
                        [routerLink]="['/users', 'Delete',selectedUser]" [disabled]="!selectedUser">
                        <i class="fa-solid fa-trash-can"></i> Eliminar Empleado
                    </button>
                </div>

                <!-- Mensaje si no hay usuarios -->
                <div *ngIf="users" class="w-100">
                    <h5 *ngIf="users.length < 1" class="text-center text-muted mt-3">
                        No hay información disponible.
                    </h5>

                    <!-- Tabla Responsiva -->
                    <div *ngIf="users.length > 0" id="container-table" class="table-responsive">
                        <table id="tableUsers" datatable [dtOptions]="dtOptions"
                            class="table text-center table-striped table-hover table-bordered">
                            <thead class="table-dark">
                                <tr>
                                    <th scope="col">Seleccionar</th>
                                    <th scope="col">Usuario</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Idioma</th>
                                    <th scope="col">Habilitado</th>
                                    <th scope="col">Rol</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let user of users">
                                    <td>
                                        <input class="form-check-input" type="checkbox" [value]="user.usuario"
                                            (change)="selectUser(user.usuario, $event)">
                                    </td>
                                    <th scope="row">{{ user.usuario }}</th>
                                    <td>{{ user.nombre }}</td>
                                    <td>{{ user.email }}</td>
                                    <td>{{ user.idioma }}</td>
                                    <td>
                                        <ng-container
                                            [ngTemplateOutlet]="user.habilitado == 1 ? habilitado : deshabilitado"></ng-container>
                                    </td>
                                    <td>{{ user.rol }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #habilitado>
    <i class="fa-solid fa-check text-success"></i>
</ng-template>
<ng-template #deshabilitado>
    <i class="fa-solid fa-x text-danger"></i>
</ng-template>